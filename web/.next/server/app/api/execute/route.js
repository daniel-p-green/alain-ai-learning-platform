"use strict";(()=>{var e={};e.id=972,e.ids=[972],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6005:e=>{e.exports=require("node:crypto")},7561:e=>{e.exports=require("node:fs")},9411:e=>{e.exports=require("node:path")},603:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>h,requestAsyncStorage:()=>p,routeModule:()=>u,serverHooks:()=>l,staticGenerationAsyncStorage:()=>d});var s={};r.r(s),r.d(s,{POST:()=>c});var n=r(9303),o=r(8716),a=r(670),i=r(4910);async function c(e){let t;let{userId:r,getToken:s}=await (0,i.I)();if(!r)return new Response(JSON.stringify({error:"Unauthorized"}),{status:401});try{t=await e.json()}catch{return new Response(JSON.stringify({error:"Invalid JSON"}),{status:400})}let n=!1!==t.stream,o=process.env.NEXT_PUBLIC_BACKEND_BASE||"http://localhost:4000";try{let e=await s();if(n){let r=await fetch(`${o}/execute/stream`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)});if(!r.ok){let e=await r.text();return new Response(JSON.stringify({success:!1,error:{code:"backend_error",message:`Backend error: ${r.status} ${e}`}}),{status:r.status})}return new Response(r.body,{headers:{"Content-Type":"text/event-stream; charset=utf-8","Cache-Control":"no-cache",Connection:"keep-alive"}})}{let r=await fetch(`${o}/execute`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)}),s=await r.json();return Response.json(s,{status:r.status})}}catch(e){return console.error("Proxy error:",e),Response.json({success:!1,error:{code:"proxy_error",message:"Failed to connect to backend service"}},{status:500})}}let u=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/execute/route",pathname:"/api/execute",filename:"route",bundlePath:"app/api/execute/route"},resolvedPagePath:"/Users/danielgreen/Downloads/OSS hackathon/alain-ai-learning-platform/web/app/api/execute/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:p,staticGenerationAsyncStorage:d,serverHooks:l}=u,x="/api/execute/route";function h(){return(0,a.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:d})}},9303:(e,t,r)=>{e.exports=r(517)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[13],()=>r(603));module.exports=s})();