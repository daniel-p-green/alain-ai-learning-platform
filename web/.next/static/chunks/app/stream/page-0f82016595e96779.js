(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{2431:function(){},7903:function(e,t,i){Promise.resolve().then(i.bind(i,4575))},4575:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return d}});var n=i(7437),o=i(2265),l=i(789),r=i(752);function d(){let[e,t]=(0,o.useState)(""),[i,d]=(0,o.useState)(!1);async function s(){t(""),d(!0);try{let d=await fetch("/api/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:"openai-compatible",model:"gpt-4o-mini",messages:[{role:"user",content:"Write a haiku about Next.js."}],stream:!0})});if(!d.ok||!d.body)throw Error("request failed");let c=d.body.getReader(),u=new TextDecoder,h="";for(;;){let d;let{done:f,value:v}=await c.read();if(f)break;for(h+=u.decode(v,{stream:!0});-1!==(d=h.indexOf("\n\n"));){let c=h.slice(0,d);h=h.slice(d+2);let u=c.trim();if(u&&u.startsWith("data:")){let d=u.slice(5).trim();if("[DONE]"===d)break;try{var e,i,n,o,l,r,s,a;let c=JSON.parse(d),u=null!==(a=null!==(s=null==c?void 0:null===(n=c.choices)||void 0===n?void 0:null===(i=n[0])||void 0===i?void 0:null===(e=i.delta)||void 0===e?void 0:e.content)&&void 0!==s?s:null==c?void 0:null===(r=c.choices)||void 0===r?void 0:null===(l=r[0])||void 0===l?void 0:null===(o=l.message)||void 0===o?void 0:o.content)&&void 0!==a?a:"";t(e=>e+(u||""))}catch(e){}}}}}catch(e){t("Error: ".concat((null==e?void 0:e.message)||String(e)))}finally{d(!1)}}return(0,n.jsxs)("div",{style:{padding:16},children:[(0,n.jsx)("h1",{children:"Streaming Demo"}),(0,n.jsxs)(l.tj,{children:[(0,n.jsx)("p",{children:"Please sign in to run the demo."}),(0,n.jsx)(r.$d,{})]}),(0,n.jsx)(l.CH,{children:(0,n.jsx)("button",{disabled:i,onClick:s,children:i?"Running...":"Run"})}),(0,n.jsx)("pre",{style:{whiteSpace:"pre-wrap",marginTop:16},children:e})]})}}},function(e){e.O(0,[780,789,971,117,744],function(){return e(e.s=7903)}),_N_E=e.O()}]);